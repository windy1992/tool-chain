### 单体服务阶段的微服务友好设计指南
#

#### 1、面向接口设计，每个数据表抽象成一个“领域服务接口”
    每一个关键表（实体）抽象出一个接口（UserService, ProductService, OrderService 等）
    接口的方法只接受 值对象 和原始类型，不暴露实体引用

#### 2、接口背后是“实体 + 仓储 + 业务”的本地组合
    接口的具体实现中引用实体、仓储、值对象等聚合根内部细节
    业务逻辑集中在接口实现中，外部不感知

#### 3、使用工厂函数返回接口具体实现
    后期拆服务的时候，只需要把这个工厂函数的实现切换为 RPC调用（读）+ 本地事务消息表（事件驱动实现分布式事务写入） 
    领域服务封装为微服务时，调用方式零改动

#### 4、只有一个服务只能直接操作关键表（或者说拥有一个仓储的权限）
    定义服务边界，其他表的操作必须通过 接口访问 + 值对象传参

#### 5、每个前端请求到来根据职责，将请求路由到一个抽象接口上

#
### 代码文件如下
/product/
    product.py          # 实体
    value_objects.py    # 值对象
    repository.py       # 仓储接口
    service.py          # 对外服务接口抽象与实现
    schema.py           # 协议交互